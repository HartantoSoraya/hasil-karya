import{P as _,j as z,r as d,Q as E,l as H,n as J,q as t,c as o,S,I as T,T as W,x as l,s as X}from"./index-d8570b98.js";import{u as x}from"./gasOperator-497adca5.js";import{u as Y}from"./fuelLog-8188d5dc.js";import{u as B}from"./driver-4b8ac86d.js";import{u as M}from"./truck-17634e1b.js";import{u as P}from"./station-56b545b2.js";import{V as u,b as Z,a as D}from"./VRow-ae8b4a94.js";import{V as $}from"./VForm-c95c40f9.js";import{V as k}from"./VTextField-d53f6a8a.js";import{V as b}from"./VAutocomplete-90f07087.js";import{V as ee}from"./VTextarea-c1327748.js";import"./VGrid-aa4a8c47.js";import"./forwardRefs-49923578.js";import"./VSelect-e5c25370.js";import"./VMenu-f39875ea.js";import"./VOverlay-f87aa014.js";import"./VSelectionControl-d26b90d8.js";const le=X("h2",{class:"mb-0"}," Ubah Data Pengisian BBM Truk ",-1),be={__name:"edit-fuel-log-truck",setup(ae){const{drivers:F}=_(B()),{trucks:L}=_(M()),{stations:O}=_(P()),{fetchDrivers:w}=B(),{fetchTrucks:K}=M(),{fetchStations:R}=P();w(),K(),R();const C=z(),{gasOperators:N,loading:j,error:a}=_(x()),{fetchGasOperators:G}=x();G();const{fetchFuelLog:I,updateFuelLogTruck:q}=Y(),y=C.params.id,m=d(""),i=d(""),n=d(""),v=d(""),c=d(""),p=d(""),h=d("diesel"),f=d(""),g=d(""),V=d(""),U=async()=>{try{const s=await I(y);m.value=s.code,i.value=s.date,n.value=s.gas_operator.id,v.value=s.truck.id,c.value=s.driver.id,p.value=s.station.id,h.value=s.fuel_type,f.value=s.volume*1,g.value=s.odometer*1,V.value=s.remarks}catch(s){console.error(s)}};E(()=>{U(),document.title="Ubah Data Pengisian BBM Truk"});const A=()=>{q({id:y,code:m.value,date:i.value,gas_operator_id:n.value,truck_id:v.value,driver_id:c.value,station_id:p.value,fuel_type:h.value,volume:f.value,odometer:g.value,remarks:V.value})},Q=()=>{U()};return(s,r)=>(H(),J(D,null,{default:t(()=>[o(u,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:t(()=>[le,o(S,{to:"/admin/fuel-log",color:"primary"},{default:t(()=>[T(" Kembali ")]),_:1})]),_:1}),o(u,{cols:"12"},{default:t(()=>[o(Z,null,{default:t(()=>[o($,{onSubmit:W(A,["prevent"])},{default:t(()=>[o(D,null,{default:t(()=>[o(u,{cols:"12",md:"6"},{default:t(()=>[o(k,{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=e=>m.value=e),label:"Kode",placeholder:"Kode","error-messages":l(a)&&l(a).code?[l(a).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),o(u,{cols:"12",md:"6"},{default:t(()=>[o(k,{modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=e=>i.value=e),label:"Tanggal",placeholder:"Tanggal Mulai","error-messages":l(a)&&l(a).date?[l(a).date]:[],type:"datetime-local"},null,8,["modelValue","error-messages"])]),_:1}),o(u,{cols:"12",md:"6"},{default:t(()=>[o(b,{modelValue:n.value,"onUpdate:modelValue":r[2]||(r[2]=e=>n.value=e),items:l(N),label:"Solar Man",placeholder:"Pilih Solar Man","error-messages":l(a)&&l(a).gas_operator_id?[l(a).gas_operator_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),o(u,{cols:"12",md:"6"},{default:t(()=>[o(b,{modelValue:c.value,"onUpdate:modelValue":r[3]||(r[3]=e=>c.value=e),items:l(F),label:"Driver",placeholder:"Pilih Driver","error-messages":l(a)&&l(a).driver_id?[l(a).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),o(u,{cols:"12",md:"6"},{default:t(()=>[o(b,{modelValue:v.value,"onUpdate:modelValue":r[4]||(r[4]=e=>v.value=e),items:l(L),label:"Truk",placeholder:"Pilih Truk","error-messages":l(a)&&l(a).truck_id?[l(a).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),o(u,{cols:"12",md:"6"},{default:t(()=>[o(b,{modelValue:p.value,"onUpdate:modelValue":r[5]||(r[5]=e=>p.value=e),items:l(O),label:"POS",placeholder:"Pilih POS","error-messages":l(a)&&l(a).station_id?[l(a).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),o(u,{cols:"12",md:"6"},{default:t(()=>[o(k,{modelValue:f.value,"onUpdate:modelValue":r[6]||(r[6]=e=>f.value=e),label:"Volume",placeholder:"Volume BBM","error-messages":l(a)&&l(a).volume?[l(a).volume]:[]},null,8,["modelValue","error-messages"])]),_:1}),o(u,{cols:"12",md:"6"},{default:t(()=>[o(k,{modelValue:g.value,"onUpdate:modelValue":r[7]||(r[7]=e=>g.value=e),label:"Odometer",placeholder:"Odometer","error-messages":l(a)&&l(a).odometer?[l(a).odometer]:[]},null,8,["modelValue","error-messages"])]),_:1}),o(u,{cols:"12",md:"12"},{default:t(()=>[o(ee,{modelValue:V.value,"onUpdate:modelValue":r[8]||(r[8]=e=>V.value=e),label:"Keterangan",placeholder:"Keterangan Material Movement","error-messages":l(a)&&l(a).remarks?[l(a).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),o(u,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[o(S,{type:"submit",loading:l(j),color:"primary"},{default:t(()=>[T(" Simpan ")]),_:1},8,["loading"]),o(S,{color:"secondary",variant:"tonal",onClick:Q},{default:t(()=>[T(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{be as default};
