import{j as ee,P as R,r as u,Q as ae,w as T,l as te,n as le,q as o,c as l,S as h,I as C,T as se,x as a,s as oe}from"./index-d8570b98.js";import{u as E}from"./station-56b545b2.js";import{u as F}from"./region-9ed148fc.js";import{u as I}from"./material-094c0868.js";import{V as r,b as ie,a as q}from"./VRow-ae8b4a94.js";import{V as re}from"./VForm-c95c40f9.js";import{V as O}from"./VTextField-d53f6a8a.js";import{V as p}from"./VAutocomplete-90f07087.js";import{V as me}from"./VTextarea-c1327748.js";import"./VGrid-aa4a8c47.js";import"./forwardRefs-49923578.js";import"./VSelect-e5c25370.js";import"./VMenu-f39875ea.js";import"./VOverlay-f87aa014.js";import"./VSelectionControl-d26b90d8.js";const de=oe("h2",{class:"mb-0"}," Edit Station ",-1),Ne={__name:"edit-station",setup(ue){const Q=ee(),{categories:z,loading:G,error:t}=R(E()),{fetchStation:H,fetchStationCategories:J,updateStation:L}=E(),{materials:W}=R(I()),{fetchMaterials:X}=I();X(),J();const{provinces:x,regencies:U,districts:K,subdistricts:N}=R(F()),{fetchProvinces:Y,fetchRegencies:M,fetchDistricts:A,fetchSubdistricts:B}=F(),P=Q.params.id,V=u("AUTO"),g=u(""),c=u(null),v=u(null),f=u(null),b=u(null),_=u(""),y=u(""),S=u(""),k=async()=>{var m,s,e,w;try{const i=await H(P);V.value=i.code,g.value=i.name,c.value=(m=x.value.find(d=>d.nama===i.province))==null?void 0:m.id,await M(c.value),v.value=(s=U.value.find(d=>d.nama===i.regency))==null?void 0:s.id,await A(v.value),f.value=(e=K.value.find(d=>d.nama===i.district))==null?void 0:e.id,await B(f.value),b.value=(w=N.value.find(d=>d.nama===i.subdistrict))==null?void 0:w.id,_.value=i.address,y.value=i.category,S.value=i.material.id}catch(i){console.error(i)}};ae(()=>{k(),document.title="Edit Station"});const Z=()=>{var i,d,D,j;const m=(i=x.value.find(n=>n.id===c.value))==null?void 0:i.nama,s=(d=U.value.find(n=>n.id===v.value))==null?void 0:d.nama,e=(D=K.value.find(n=>n.id===f.value))==null?void 0:D.nama,w=(j=N.value.find(n=>n.id===b.value))==null?void 0:j.nama;L({id:P,code:V.value,name:g.value,province:m,regency:s,district:e,subdistrict:w,address:_.value,category:y.value,material_id:S.value,is_active:1})};Y(),T(c,m=>{M(m)}),T(v,m=>{A(m)}),T(f,m=>{B(m)});const $=()=>{k()};return(m,s)=>(te(),le(q,null,{default:o(()=>[l(r,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[de,l(h,{to:{name:"admin-station"},color:"primary"},{default:o(()=>[C(" Kembali ")]),_:1})]),_:1}),l(r,{cols:"12"},{default:o(()=>[l(ie,null,{default:o(()=>[l(re,{onSubmit:se(Z,["prevent"])},{default:o(()=>[l(q,null,{default:o(()=>[l(r,{cols:"12",md:"6"},{default:o(()=>[l(O,{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=e=>V.value=e),label:"Kode",placeholder:"Kode Station","error-messages":a(t)&&a(t).code?[a(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(O,{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=e=>g.value=e),label:"Nama",placeholder:"Nama Station","error-messages":a(t)&&a(t).name?[a(t).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=e=>c.value=e),label:"Provinsi",items:a(x),"error-messages":a(t)&&a(t).province?[a(t).province]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:v.value,"onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),label:"Kabupaten/Kota",items:a(U),"error-messages":a(t)&&a(t).regency?[a(t).regency]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=e=>f.value=e),label:"Kecamatan",items:a(K),"error-messages":a(t)&&a(t).district?[a(t).district]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:b.value,"onUpdate:modelValue":s[5]||(s[5]=e=>b.value=e),label:"Kelurahan/Desa",items:a(N),"error-messages":a(t)&&a(t).subdistrict?[a(t).subdistrict]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"12"},{default:o(()=>[l(me,{modelValue:_.value,"onUpdate:modelValue":s[6]||(s[6]=e=>_.value=e),label:"Alamat",placeholder:"Alamat Station","error-messages":a(t)&&a(t).address?[a(t).address]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:y.value,"onUpdate:modelValue":s[7]||(s[7]=e=>y.value=e),label:"Kategori",items:a(z),"item-title":"name","item-value":"name",placeholder:"Pilih Kategori Station","error-messages":a(t)&&a(t).category?[a(t).category]:[]},null,8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(p,{modelValue:S.value,"onUpdate:modelValue":s[8]||(s[8]=e=>S.value=e),label:"Material",items:a(W),"error-messages":a(t)&&a(t).material_id?[a(t).material_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(h,{type:"submit",loading:a(G),color:"primary"},{default:o(()=>[C(" Simpan ")]),_:1},8,["loading"]),l(h,{color:"secondary",variant:"tonal",onClick:$},{default:o(()=>[C(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ne as default};
