import{j as ee,R,r as u,S as ae,w as h,l as te,n as le,q as o,c as l,Y as C,I as M,Z as se,x as a,s as oe}from"./index-b8bb9b87.js";import{u as E}from"./station-a95b2555.js";import{u as F}from"./region-b9184f88.js";import{u as I}from"./material-b73e32d2.js";import{V as r,b as ie,a as q}from"./VRow-d63588e1.js";import{V as re}from"./VForm-b1764071.js";import{V as O}from"./VTextField-d716ff87.js";import{V as f}from"./VAutocomplete-33816023.js";import{V as me}from"./VTextarea-0d842cdd.js";import"./VGrid-89f96509.js";import"./forwardRefs-e658ad70.js";import"./index-e196a5dc.js";import"./VSelect-e149f7f0.js";import"./VMenu-e6957ca7.js";import"./VDivider-a85c5ebc.js";import"./VOverlay-b398b44b.js";import"./VSelectionControl-7fa3b263.js";import"./VChip-6ed5d59d.js";const de=oe("h2",{class:"mb-0"}," Edit Station ",-1),Ce={__name:"edit-station",setup(ue){const Y=ee(),{categories:Z,loading:z,error:t}=R(E()),{fetchStation:G,fetchStationCategories:H,updateStation:J}=E(),{materials:L}=R(I()),{fetchMaterials:Q}=I();Q(),H();const{provinces:x,regencies:U,districts:K,subdistricts:N}=R(F()),{fetchProvinces:W,fetchRegencies:T,fetchDistricts:A,fetchSubdistricts:B}=F(),k=Y.params.id,V=u("AUTO"),g=u(""),c=u(null),v=u(null),p=u(null),b=u(null),_=u(""),y=u(""),S=u(""),D=async()=>{var m,s,e,w;try{const i=await G(k);V.value=i.code,g.value=i.name,c.value=(m=x.value.find(d=>d.nama===i.province))==null?void 0:m.id,await T(c.value),v.value=(s=U.value.find(d=>d.nama===i.regency))==null?void 0:s.id,await A(v.value),p.value=(e=K.value.find(d=>d.nama===i.district))==null?void 0:e.id,await B(p.value),b.value=(w=N.value.find(d=>d.nama===i.subdistrict))==null?void 0:w.id,_.value=i.address,y.value=i.category,S.value=i.material.id}catch(i){console.error(i)}};ae(()=>{D(),document.title="Edit Station"});const X=()=>{var i,d,P,j;const m=(i=x.value.find(n=>n.id===c.value))==null?void 0:i.nama,s=(d=U.value.find(n=>n.id===v.value))==null?void 0:d.nama,e=(P=K.value.find(n=>n.id===p.value))==null?void 0:P.nama,w=(j=N.value.find(n=>n.id===b.value))==null?void 0:j.nama;J({id:k,code:V.value,name:g.value,province:m,regency:s,district:e,subdistrict:w,address:_.value,category:y.value,material_id:S.value,is_active:1})};W(),h(c,m=>{T(m)}),h(v,m=>{A(m)}),h(p,m=>{B(m)});const $=()=>{D()};return(m,s)=>(te(),le(q,null,{default:o(()=>[l(r,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[de,l(C,{to:{name:"admin-station"},color:"primary"},{default:o(()=>[M(" Kembali ")]),_:1})]),_:1}),l(r,{cols:"12"},{default:o(()=>[l(ie,null,{default:o(()=>[l(re,{onSubmit:se(X,["prevent"])},{default:o(()=>[l(q,null,{default:o(()=>[l(r,{cols:"12",md:"6"},{default:o(()=>[l(O,{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=e=>V.value=e),label:"Kode",placeholder:"Kode Station","error-messages":a(t)&&a(t).code?[a(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(O,{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=e=>g.value=e),label:"Nama",placeholder:"Nama Station","error-messages":a(t)&&a(t).name?[a(t).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=e=>c.value=e),label:"Provinsi",items:a(x),"error-messages":a(t)&&a(t).province?[a(t).province]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:v.value,"onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),label:"Kabupaten/Kota",items:a(U),"error-messages":a(t)&&a(t).regency?[a(t).regency]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:p.value,"onUpdate:modelValue":s[4]||(s[4]=e=>p.value=e),label:"Kecamatan",items:a(K),"error-messages":a(t)&&a(t).district?[a(t).district]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:b.value,"onUpdate:modelValue":s[5]||(s[5]=e=>b.value=e),label:"Kelurahan/Desa",items:a(N),"error-messages":a(t)&&a(t).subdistrict?[a(t).subdistrict]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",md:"12"},{default:o(()=>[l(me,{modelValue:_.value,"onUpdate:modelValue":s[6]||(s[6]=e=>_.value=e),label:"Alamat",placeholder:"Alamat Station","error-messages":a(t)&&a(t).address?[a(t).address]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:y.value,"onUpdate:modelValue":s[7]||(s[7]=e=>y.value=e),label:"Kategori",items:a(Z),"item-title":"name","item-value":"name",placeholder:"Pilih Kategori Station","error-messages":a(t)&&a(t).category?[a(t).category]:[]},null,8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",md:"6"},{default:o(()=>[l(f,{modelValue:S.value,"onUpdate:modelValue":s[8]||(s[8]=e=>S.value=e),label:"Material",items:a(L),"error-messages":a(t)&&a(t).material_id?[a(t).material_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(r,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(C,{type:"submit",loading:a(z),color:"primary"},{default:o(()=>[M(" Simpan ")]),_:1},8,["loading"]),l(C,{color:"secondary",variant:"tonal",onClick:$},{default:o(()=>[M(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ce as default};
