import{j as H,bx as J,R as m,r as d,S as L,_ as Q,l as W,n as X,q as o,c as t,Y as M,I as h,Z as $,x as a,s as ee}from"./index-b8bb9b87.js";import{u as T}from"./materialMovement-e64c2953.js";import{u as P}from"./driver-ab7ed4fc.js";import{u as R}from"./truck-a3e50338.js";import{u as U}from"./station-a95b2555.js";import{u as D}from"./checker-01526226.js";import{t as C}from"./formatters-c9e1f9c6.js";import{V as i,b as ae,a as w}from"./VRow-d63588e1.js";import{V as le}from"./VForm-b1764071.js";import{V as g}from"./VTextField-d716ff87.js";import{b as k}from"./VSelect-e149f7f0.js";import{V as te}from"./VTextarea-0d842cdd.js";import"./VGrid-89f96509.js";import"./forwardRefs-e658ad70.js";import"./index-e196a5dc.js";import"./VMenu-e6957ca7.js";import"./VDivider-a85c5ebc.js";import"./VOverlay-b398b44b.js";import"./VSelectionControl-7fa3b263.js";import"./VChip-6ed5d59d.js";const oe=ee("h2",{class:"mb-0"}," Edit Material Movement ",-1),Te={__name:"edit-material-movement",setup(re){const K=H();J();const{drivers:B}=m(P()),{trucks:I}=m(R()),{stations:N}=m(U()),{checkers:A}=m(D()),{fetchDrivers:j}=P(),{fetchTrucks:E}=R(),{fetchStations:F}=U(),{fetchCheckers:O}=D();j(),E(),F({type:"station"}),O();const{loading:q,error:l}=m(T()),{fetchMaterialMovementTechnicalAdmin:Y,updateMaterialMovementTechnicalAdmin:Z}=T(),y=K.params.id,u=d(""),n=d(""),c=d(""),v=d(""),p=d(""),_=d(""),f=d(""),V=d(""),b=d(""),z=d(null),S=async()=>{try{const s=await Y(y);u.value=s.code,n.value=s.date,c.value=s.driver.id,v.value=s.truck.id,p.value=s.station.id,_.value=s.checker.id,f.value=C(s.observation_ratio),V.value=C(s.solid_ratio),b.value=s.remarks,z.value=s.payment_proof_image}catch(s){console.error(s)}};L(()=>{S(),document.title="Edit Material Movement"});const x=()=>{S()},G=()=>{Z({id:y,code:u.value,date:n.value,driver_id:c.value,truck_id:v.value,station_id:p.value,checker_id:_.value,observation_ratio:f.value,solid_ratio:V.value,remarks:b.value})};return Q(()=>{x(),l.value=null}),(s,r)=>(W(),X(w,null,{default:o(()=>[t(i,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[oe,t(M,{to:{name:"technical-admin-material-movement"},color:"primary"},{default:o(()=>[h(" Kembali ")]),_:1})]),_:1}),t(i,{cols:"12"},{default:o(()=>[t(ae,null,{default:o(()=>[t(le,{onSubmit:$(G,["prevent"])},{default:o(()=>[t(w,null,{default:o(()=>[t(i,{cols:"12",md:"6"},{default:o(()=>[t(g,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),label:"Kode",placeholder:"Kode Material Movement","error-messages":a(l)&&a(l).code?[a(l).code]:[],disabled:""},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(g,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e),label:"Tanggal",placeholder:"Masukan Tanggal","error-messages":a(l)&&a(l).date?[a(l).date]:[],type:"datetime-local",disabled:""},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=e=>c.value=e),items:a(B),label:"Driver",placeholder:"Pilih Driver","error-messages":a(l)&&a(l).driver_id?[a(l).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=e=>v.value=e),items:a(I),label:"Truck",placeholder:"Pilih Truck","error-messages":a(l)&&a(l).truck_id?[a(l).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=e=>p.value=e),items:a(N),label:"POS",placeholder:"Pilih POS","error-messages":a(l)&&a(l).station_id?[a(l).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:_.value,"onUpdate:modelValue":r[5]||(r[5]=e=>_.value=e),items:a(A),label:"Pemeriksa",placeholder:"Pilih Pemeriksa","error-messages":a(l)&&a(l).checker_id?[a(l).checker_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(g,{modelValue:f.value,"onUpdate:modelValue":r[6]||(r[6]=e=>f.value=e),label:"Rasio Index",placeholder:"Masukan Rasio Index","error-messages":a(l)&&a(l).observation_ratio?[a(l).observation_ratio]:[],type:"number",disabled:""},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(g,{modelValue:V.value,"onUpdate:modelValue":r[7]||(r[7]=e=>V.value=e),label:"Rasio Padat",placeholder:"Rasio Padat","error-messages":a(l)&&a(l).solid_ratio?[a(l).solid_ratio]:[],type:"number"},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"12"},{default:o(()=>[t(te,{modelValue:b.value,"onUpdate:modelValue":r[8]||(r[8]=e=>b.value=e),label:"Keterangan",placeholder:"Keterangan Material Movement","error-messages":a(l)&&a(l).remarks?[a(l).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[t(M,{type:"submit",loading:a(q),color:"primary"},{default:o(()=>[h(" Simpan ")]),_:1},8,["loading"]),t(M,{color:"secondary",variant:"tonal",onClick:x},{default:o(()=>[h(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Te as default};
