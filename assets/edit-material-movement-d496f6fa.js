import{j as H,bx as J,P as d,r as m,Q as L,X as W,l as Y,n as Z,q as o,c as l,S as b,I as h,T as $,x as a,s as ee}from"./index-d8570b98.js";import{u as S}from"./materialMovement-e98d519d.js";import{u as P}from"./driver-4b8ac86d.js";import{u as T}from"./truck-17634e1b.js";import{u as U}from"./station-56b545b2.js";import{u as R}from"./checker-8e08a759.js";import{V as i,b as ae,a as D}from"./VRow-ae8b4a94.js";import{V as te}from"./VForm-c95c40f9.js";import{V as k}from"./VTextField-d53f6a8a.js";import{c as M}from"./VSelect-e5c25370.js";import{V as le}from"./VTextarea-c1327748.js";import"./VGrid-aa4a8c47.js";import"./forwardRefs-49923578.js";import"./VMenu-f39875ea.js";import"./VOverlay-f87aa014.js";import"./VSelectionControl-d26b90d8.js";const oe=ee("h2",{class:"mb-0"}," Edit Material Movement ",-1),xe={__name:"edit-material-movement",setup(re){const C=H(),w=J(),{drivers:I}=d(P()),{trucks:K}=d(T()),{stations:B}=d(U()),{checkers:N}=d(R()),{fetchDrivers:O}=P(),{fetchTrucks:j}=T(),{fetchStations:E}=U(),{fetchCheckers:F}=R();O(),j(),E({type:"station"}),F();const{materialMovement:se,loading:q,error:t}=d(S()),{fetchMaterialMovement:Q,updateMaterialMovement:X}=S(),x=C.params.id,u=m(""),n=m(""),c=m(""),v=m(""),p=m(""),_=m(""),f=m(""),V=m(""),g=m(""),z=m(null),y=async()=>{try{const s=await Q(x);console.log(w.parseISO(s.date)),u.value=s.code,n.value=s.date,c.value=s.driver.id,v.value=s.truck.id,p.value=s.station.id,_.value=s.checker.id,f.value=s.observation_ratio_percentage*100,V.value=s.solid_ratio*100,g.value=s.remarks,z.value=s.payment_proof_image}catch(s){console.error(s)}};L(()=>{y(),document.title="Edit Material Movement"});const A=()=>{X({id:x,code:u.value,date:n.value,driver_id:c.value,truck_id:v.value,station_id:p.value,checker_id:_.value,observation_ratio_percentage:f.value/100,solid_ratio:V.value/100,remarks:g.value})};W(()=>{t.value=null});const G=()=>{y()};return(s,r)=>(Y(),Z(D,null,{default:o(()=>[l(i,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[oe,l(b,{to:{name:"admin-material-movement"},color:"primary"},{default:o(()=>[h(" Kembali ")]),_:1})]),_:1}),l(i,{cols:"12"},{default:o(()=>[l(ae,null,{default:o(()=>[l(te,{onSubmit:$(A,["prevent"])},{default:o(()=>[l(D,null,{default:o(()=>[l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),label:"Kode",placeholder:"Kode Material Movement","error-messages":a(t)&&a(t).code?[a(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e),label:"Tanggal",placeholder:"Masukan Tanggal","error-messages":a(t)&&a(t).date?[a(t).date]:[],type:"datetime-local"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=e=>c.value=e),items:a(I),label:"Driver",placeholder:"Pilih Driver","error-messages":a(t)&&a(t).driver_id?[a(t).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=e=>v.value=e),items:a(K),label:"Truck",placeholder:"Pilih Truck","error-messages":a(t)&&a(t).truck_id?[a(t).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=e=>p.value=e),items:a(B),label:"POS",placeholder:"Pilih POS","error-messages":a(t)&&a(t).station_id?[a(t).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:_.value,"onUpdate:modelValue":r[5]||(r[5]=e=>_.value=e),items:a(N),label:"Pemeriksa",placeholder:"Pilih Pemeriksa","error-messages":a(t)&&a(t).checker_id?[a(t).checker_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:f.value,"onUpdate:modelValue":r[6]||(r[6]=e=>f.value=e),label:"Presentase Rasio Index",placeholder:"Masukan Presentase Rasio Index","error-messages":a(t)&&a(t).observation_ratio_percentage?[a(t).observation_ratio_percentage]:[],type:"number",step:"1",suffix:"%"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:V.value,"onUpdate:modelValue":r[7]||(r[7]=e=>V.value=e),label:"Rasio Padat",placeholder:"Rasio Padat","error-messages":a(t)&&a(t).solid_ratio?[a(t).solid_ratio]:[],type:"number",step:"1",suffix:"%"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"12"},{default:o(()=>[l(le,{modelValue:g.value,"onUpdate:modelValue":r[8]||(r[8]=e=>g.value=e),label:"Keterangan",placeholder:"Keterangan Material Movement","error-messages":a(t)&&a(t).remarks?[a(t).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(b,{type:"submit",loading:a(q),color:"primary"},{default:o(()=>[h(" Simpan ")]),_:1},8,["loading"]),l(b,{color:"secondary",variant:"tonal",onClick:G},{default:o(()=>[h(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{xe as default};
