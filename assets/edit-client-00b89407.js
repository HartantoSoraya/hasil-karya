import{j as W,P as I,r as u,Q as X,w as S,l as Y,n as Z,q as d,c as t,S as T,I as B,T as $,x as e,s as ee}from"./index-d8570b98.js";import{u as M}from"./client-8eddd01b.js";import{u as q}from"./region-9ed148fc.js";import{V as n,b as ae,a as Q}from"./VRow-ae8b4a94.js";import{V as le}from"./VForm-c95c40f9.js";import{V as K}from"./VTextField-d53f6a8a.js";import{V as w}from"./VAutocomplete-90f07087.js";import{V as te}from"./VTextarea-c1327748.js";import"./VGrid-aa4a8c47.js";import"./forwardRefs-49923578.js";import"./VSelect-e5c25370.js";import"./VMenu-f39875ea.js";import"./VOverlay-f87aa014.js";import"./VSelectionControl-d26b90d8.js";const se=ee("h2",{class:"mb-0"}," Edit Client ",-1),ye={__name:"edit-client",setup(oe){const z=W(),{loading:o,error:l}=I(M()),{fetchClient:G,updateClient:H}=M(),{provinces:x,regencies:N,districts:U,subdistricts:R}=I(q()),{fetchProvinces:J,fetchRegencies:D,fetchDistricts:E,fetchSubdistricts:P}=q(),k=z.params.id,f=u(""),b=u(""),v=u(null),p=u(null),g=u(null),V=u(null),_=u(""),y=u(""),C=u(""),A=async()=>{var r,s,a,h;try{const i=await G(k);f.value=i.code,b.value=i.name,v.value=(r=x.value.find(m=>m.nama===i.province))==null?void 0:r.id,await D(v.value),p.value=(s=N.value.find(m=>m.nama===i.regency))==null?void 0:s.id,await E(p.value),g.value=(a=U.value.find(m=>m.nama===i.district))==null?void 0:a.id,await P(g.value),V.value=(h=R.value.find(m=>m.nama===i.subdistrict))==null?void 0:h.id,_.value=i.address,y.value=i.phone,C.value=i.email}catch(i){console.error(i)}};X(()=>{A(),document.title="Edit Client"});const L=()=>{var i,m,j,F;const r=(i=x.value.find(c=>c.id===v.value))==null?void 0:i.nama,s=(m=N.value.find(c=>c.id===p.value))==null?void 0:m.nama,a=(j=U.value.find(c=>c.id===g.value))==null?void 0:j.nama,h=(F=R.value.find(c=>c.id===V.value))==null?void 0:F.nama;H({id:k,code:f.value,name:b.value,province:r,regency:s,district:a,subdistrict:h,address:_.value,phone:y.value,email:C.value})};J(),S(v,r=>{D(r)}),S(p,r=>{E(r)}),S(g,r=>{P(r)});const O=()=>{A()};return(r,s)=>(Y(),Z(Q,null,{default:d(()=>[t(n,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:d(()=>[se,t(T,{to:{name:"admin-client"},color:"primary"},{default:d(()=>[B(" Kembali ")]),_:1})]),_:1}),t(n,{cols:"12"},{default:d(()=>[t(ae,null,{default:d(()=>[t(le,{onSubmit:$(L,["prevent"])},{default:d(()=>[t(Q,null,{default:d(()=>[t(n,{cols:"12",md:"6"},{default:d(()=>[t(K,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=a=>f.value=a),label:"Kode",placeholder:"Kode Client","error-messages":e(l)&&e(l).code?[e(l).code]:[],disabled:e(o),loading:e(o)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"6"},{default:d(()=>[t(K,{modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=a=>b.value=a),label:"Nama",placeholder:"Nama Client","error-messages":e(l)&&e(l).name?[e(l).name]:[],disabled:e(o),loading:e(o)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"6"},{default:d(()=>[t(w,{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=a=>v.value=a),label:"Provinsi",items:e(x),"item-title":a=>a.nama,"item-value":a=>a.id,placeholder:"Provinsi","error-messages":e(l)&&e(l).province?[e(l).province]:[],disabled:e(o),loading:e(o),clearable:""},null,8,["modelValue","items","item-title","item-value","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"6"},{default:d(()=>[t(w,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=a=>p.value=a),label:"Kabupaten/Kota",items:e(N),"item-title":a=>a.nama,"item-value":a=>a.id,placeholder:"Kabupaten/Kota","error-messages":e(l)&&e(l).regency?[e(l).regency]:[],disabled:e(o),loading:e(o),clearable:""},null,8,["modelValue","items","item-title","item-value","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"6"},{default:d(()=>[t(w,{modelValue:g.value,"onUpdate:modelValue":s[4]||(s[4]=a=>g.value=a),label:"Kecamatan",items:e(U),"item-title":a=>a.nama,"item-value":a=>a.id,placeholder:"Kecamatan","error-messages":e(l)&&e(l).district?[e(l).district]:[],disabled:e(o),loading:e(o),clearable:""},null,8,["modelValue","items","item-title","item-value","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"6"},{default:d(()=>[t(w,{modelValue:V.value,"onUpdate:modelValue":s[5]||(s[5]=a=>V.value=a),label:"Kelurahan/Desa",items:e(R),"item-title":a=>a.nama,"item-value":a=>a.id,placeholder:"Kelurahan/Desa","error-messages":e(l)&&e(l).subdistrict?[e(l).subdistrict]:[],disabled:e(o),loading:e(o),clearable:""},null,8,["modelValue","items","item-title","item-value","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"12"},{default:d(()=>[t(e(te),{modelValue:_.value,"onUpdate:modelValue":s[6]||(s[6]=a=>_.value=a),label:"Alamat",placeholder:"Alamat Client","error-messages":e(l)&&e(l).address?[e(l).address]:[],disabled:e(o),loading:e(o)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"6"},{default:d(()=>[t(K,{modelValue:y.value,"onUpdate:modelValue":s[7]||(s[7]=a=>y.value=a),label:"Telepon",placeholder:"Telepon Client","error-messages":e(l)&&e(l).phone?[e(l).phone]:[],disabled:e(o),loading:e(o)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",md:"6"},{default:d(()=>[t(K,{modelValue:C.value,"onUpdate:modelValue":s[8]||(s[8]=a=>C.value=a),label:"Email",placeholder:"Email Client","error-messages":e(l)&&e(l).email?[e(l).email]:[],disabled:e(o),loading:e(o)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),t(n,{cols:"12",class:"d-flex gap-4"},{default:d(()=>[t(T,{type:"submit",loading:e(o),color:"primary"},{default:d(()=>[B(" Simpan ")]),_:1},8,["loading"]),t(T,{type:"reset",color:"secondary",variant:"tonal",onClick:O},{default:d(()=>[B(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ye as default};
