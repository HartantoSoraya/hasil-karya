import{j as H,bx as J,R as d,r as m,S as L,_ as Q,l as W,n as X,q as o,c as l,Y as M,I as h,Z as $,x as a,s as ee}from"./index-b8bb9b87.js";import{u as y}from"./materialMovement-e64c2953.js";import{u as P}from"./driver-ab7ed4fc.js";import{u as R}from"./truck-a3e50338.js";import{u as T}from"./station-a95b2555.js";import{u as U}from"./checker-01526226.js";import{t as D}from"./formatters-c9e1f9c6.js";import{V as i,b as ae,a as C}from"./VRow-d63588e1.js";import{V as te}from"./VForm-b1764071.js";import{V as k}from"./VTextField-d716ff87.js";import{b}from"./VSelect-e149f7f0.js";import{V as le}from"./VTextarea-0d842cdd.js";import"./VGrid-89f96509.js";import"./forwardRefs-e658ad70.js";import"./index-e196a5dc.js";import"./VMenu-e6957ca7.js";import"./VDivider-a85c5ebc.js";import"./VOverlay-b398b44b.js";import"./VSelectionControl-7fa3b263.js";import"./VChip-6ed5d59d.js";const oe=ee("h2",{class:"mb-0"}," Edit Material Movement ",-1),Pe={__name:"edit-material-movement",setup(re){const w=H(),I=J(),{drivers:K}=d(P()),{trucks:B}=d(R()),{stations:N}=d(T()),{checkers:O}=d(U()),{fetchDrivers:j}=P(),{fetchTrucks:E}=R(),{fetchStations:F}=T(),{fetchCheckers:q}=U();j(),E(),F({type:"station"}),q();const{loading:Y,error:t}=d(y()),{fetchMaterialMovement:Z,updateMaterialMovement:z}=y(),S=w.params.id,u=m(""),n=m(""),c=m(""),v=m(""),p=m(""),f=m(""),_=m(""),V=m(""),g=m(""),x=async()=>{try{const s=await Z(S);console.log(I.parseISO(s.date)),u.value=s.code,n.value=s.date,c.value=s.driver.id,v.value=s.truck.id,p.value=s.station.id,f.value=s.checker.id,_.value=D(s.observation_ratio),V.value=D(s.solid_ratio),g.value=s.remarks}catch(s){console.error(s)}};L(()=>{x(),document.title="Edit Material Movement"});const A=()=>{z({id:S,code:u.value,date:n.value,driver_id:c.value,truck_id:v.value,station_id:p.value,checker_id:f.value,observation_ratio:_.value,solid_ratio:V.value,remarks:g.value})};Q(()=>{t.value=null});const G=()=>{x()};return(s,r)=>(W(),X(C,null,{default:o(()=>[l(i,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[oe,l(M,{to:{name:"admin-material-movement"},color:"primary"},{default:o(()=>[h(" Kembali ")]),_:1})]),_:1}),l(i,{cols:"12"},{default:o(()=>[l(ae,null,{default:o(()=>[l(te,{onSubmit:$(A,["prevent"])},{default:o(()=>[l(C,null,{default:o(()=>[l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),label:"Kode",placeholder:"Kode Material Movement","error-messages":a(t)&&a(t).code?[a(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e),label:"Tanggal",placeholder:"Masukan Tanggal","error-messages":a(t)&&a(t).date?[a(t).date]:[],type:"datetime-local"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=e=>c.value=e),items:a(K),label:"Driver",placeholder:"Pilih Driver","error-messages":a(t)&&a(t).driver_id?[a(t).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=e=>v.value=e),items:a(B),label:"Truck",placeholder:"Pilih Truck","error-messages":a(t)&&a(t).truck_id?[a(t).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=e=>p.value=e),items:a(N),label:"POS",placeholder:"Pilih POS","error-messages":a(t)&&a(t).station_id?[a(t).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:f.value,"onUpdate:modelValue":r[5]||(r[5]=e=>f.value=e),items:a(O),label:"Pemeriksa",placeholder:"Pilih Pemeriksa","error-messages":a(t)&&a(t).checker_id?[a(t).checker_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:_.value,"onUpdate:modelValue":r[6]||(r[6]=e=>_.value=e),label:"Rasio Index",placeholder:"Masukan Rasio Index","error-messages":a(t)&&a(t).observation_ratio?[a(t).observation_ratio]:[],type:"number"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:V.value,"onUpdate:modelValue":r[7]||(r[7]=e=>V.value=e),label:"Rasio Padat",placeholder:"Rasio Padat","error-messages":a(t)&&a(t).solid_ratio?[a(t).solid_ratio]:[],type:"number"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"12"},{default:o(()=>[l(le,{modelValue:g.value,"onUpdate:modelValue":r[8]||(r[8]=e=>g.value=e),label:"Keterangan",placeholder:"Keterangan Material Movement","error-messages":a(t)&&a(t).remarks?[a(t).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(M,{type:"submit",loading:a(Y),color:"primary"},{default:o(()=>[h(" Simpan ")]),_:1},8,["loading"]),l(M,{color:"secondary",variant:"tonal",onClick:G},{default:o(()=>[h(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Pe as default};
