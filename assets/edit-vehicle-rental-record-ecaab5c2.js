import{P as k,j as Q,r as n,Q as T,X,l as R,n as B,q as r,c as t,S as P,I as w,T as z,x as a,A as u,J as G,O as S,s as I}from"./index-d8570b98.js";import{u as U}from"./vehicleRentalRecord-ebc9f440.js";import{u as C}from"./truck-17634e1b.js";import{u as D}from"./heavyVehicle-a6827fb6.js";import{V as s,b as L,a as K}from"./VRow-ae8b4a94.js";import{V as W}from"./VForm-c95c40f9.js";import{V as g}from"./VTextField-d53f6a8a.js";import{V as A}from"./VAutocomplete-90f07087.js";import{c as Y}from"./VSelect-e5c25370.js";import{a as Z}from"./VGrid-aa4a8c47.js";import{V as $}from"./VFileInput-edc753a7.js";import"./forwardRefs-49923578.js";import"./VMenu-f39875ea.js";import"./VOverlay-f87aa014.js";import"./VSelectionControl-d26b90d8.js";const ee=I("h2",{class:"mb-0"}," Ubah Data Penyewaan Kendaraan ",-1),ae={key:0},le=I("br",null,null,-1),ge={__name:"edit-vehicle-rental-record",setup(te){const{loading:M,error:l}=k(U()),{fetchVehicleRentalRecord:j,updateVehicleRentalRecord:N}=U(),{trucks:E}=k(C()),{fetchTrucks:F}=C(),{heavyVehicles:H}=k(D()),{fetchHeavyVehicles:O}=D();F(),O();const x=Q().params.id,m=n("AUTO"),c=n(),p=n(),d=n(),_=n(),v=n(),V=n(0),f=n(""),i=n(null),h=n(null),b=async()=>{var y,o;try{const e=await j(x);m.value=e.code,c.value=(y=e.truck)==null?void 0:y.id,p.value=(o=e.heavy_vehicle)==null?void 0:o.id,d.value=e.start_date.split(":").slice(0,2).join(":"),_.value=e.rental_duration*1,v.value=e.rental_cost*1,V.value=e.is_paid===!0?1:0,f.value=e.remarks,i.value=null,h.value=e.payment_proof_image_url}catch(e){console.error(e)}},q=()=>{const y=d.value?d.value.split("T").join(" ")+":00":null,o=i.value?i.value[0]:null;N({code:m.value,id:x,truck_id:c.value,heavy_vehicle_id:p.value,start_date:y,rental_duration:_.value,rental_cost:v.value,is_paid:V.value,remarks:f.value,payment_proof_image:o})};T(()=>{b(),document.title="Edit Penyewaan Kendaraan"}),T(()=>{b(),document.title="Edit Penyewaan Kendaraan"}),X(()=>{l.value=null});const J=()=>{b()};return(y,o)=>(R(),B(K,null,{default:r(()=>[t(s,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:r(()=>[ee,t(P,{to:"/admin/vehicle-rental-record",color:"primary"},{default:r(()=>[w(" Kembali ")]),_:1})]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(L,null,{default:r(()=>[t(W,{onSubmit:z(q,["prevent"])},{default:r(()=>[t(K,null,{default:r(()=>[t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:a(m),"onUpdate:modelValue":o[0]||(o[0]=e=>u(m)?m.value=e:null),label:"Kode",placeholder:"Kode Penyewaan Kendaraan","error-messages":a(l)&&a(l).code?[a(l).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(A,{modelValue:a(c),"onUpdate:modelValue":o[1]||(o[1]=e=>u(c)?c.value=e:null),items:a(E),"item-title":e=>e.brand+" "+e.model,"item-value":e=>e.id,label:"Truk",placeholder:"Pilih Truk","error-messages":a(l)&&a(l).truck_id?[a(l).truck_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(A,{modelValue:a(p),"onUpdate:modelValue":o[2]||(o[2]=e=>u(p)?p.value=e:null),items:a(H),"item-title":e=>e.brand+" "+e.model,"item-value":e=>e.id,label:"Alat Berat",placeholder:"Pilih Alat Berat","error-messages":a(l)&&a(l).heavy_vehicle_id?[a(l).heavy_vehicle_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:a(d),"onUpdate:modelValue":o[3]||(o[3]=e=>u(d)?d.value=e:null),label:"Tanggal Mulai",placeholder:"Tanggal Mulai",type:"datetime-local","error-messages":a(l)&&a(l).start_date?[a(l).start_date]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:a(_),"onUpdate:modelValue":o[4]||(o[4]=e=>u(_)?_.value=e:null),label:"Durasi Penyewaan (Hari)",placeholder:"Masukkan Durasi Penyewaan","error-messages":a(l)&&a(l).rental_duration?[a(l).rental_duration]:[],type:"number"},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:a(v),"onUpdate:modelValue":o[5]||(o[5]=e=>u(v)?v.value=e:null),label:"Biaya Penyewaan",placeholder:"Biaya Penyewaan","error-messages":a(l)&&a(l).rental_cost?[a(l).rental_cost]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(Y,{modelValue:a(V),"onUpdate:modelValue":o[6]||(o[6]=e=>u(V)?V.value=e:null),label:"Status Pembayaran",items:[{text:"Belum Dibayar",value:0},{text:"Sudah Dibayar",value:1}],"item-title":e=>e.text,"item-value":e=>e.value,"error-messages":a(l)&&a(l).is_paid?[a(l).is_paid]:[]},null,8,["modelValue","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:a(f),"onUpdate:modelValue":o[7]||(o[7]=e=>u(f)?f.value=e:null),label:"Catatan",placeholder:"Catatan","error-messages":a(l)&&a(l).remarks?[a(l).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[a(h)?(R(),G("p",ae," Bukti Pembayaran ")):S("",!0),a(h)?(R(),B(Z,{key:1,src:a(h),width:"100px",height:"100px"},null,8,["src"])):S("",!0),le,t(a($),{modelValue:a(i),"onUpdate:modelValue":o[8]||(o[8]=e=>u(i)?i.value=e:null),label:"Bukti Pembayaran",placeholder:"Pilih Berkas","error-messages":a(l)&&a(l).payment_proof_image?[a(l).payment_proof_image]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[t(P,{type:"submit",loading:a(M),color:"primary"},{default:r(()=>[w(" Simpan ")]),_:1},8,["loading"]),t(P,{color:"secondary",variant:"tonal",onClick:J},{default:r(()=>[w(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ge as default};
