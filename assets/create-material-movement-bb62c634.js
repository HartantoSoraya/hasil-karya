import{R as p,H as N,r as u,S as O,_ as q,l as x,J as E,x as t,n as H,q as l,c as a,I as f,v as J,Y as _,A as Y,O as Z,Z as j,K as z}from"./index-b8bb9b87.js";import{u as S}from"./materialMovement-e64c2953.js";import{u as h}from"./driver-ab7ed4fc.js";import{u as M}from"./truck-a3e50338.js";import{u as T}from"./station-a95b2555.js";import{b as y,d as G,e as L,V as s,a as C}from"./VRow-d63588e1.js";import{V as Q}from"./VDialog-7855c666.js";import{V as W}from"./VForm-b1764071.js";import{V as k}from"./VAutocomplete-33816023.js";import{V as X}from"./VTextField-d716ff87.js";import{V as $}from"./VTextarea-0d842cdd.js";import"./VGrid-89f96509.js";import"./VOverlay-b398b44b.js";import"./forwardRefs-e658ad70.js";import"./VSelect-e149f7f0.js";import"./VMenu-e6957ca7.js";import"./index-e196a5dc.js";import"./VDivider-a85c5ebc.js";import"./VSelectionControl-7fa3b263.js";import"./VChip-6ed5d59d.js";const Se={__name:"create-material-movement",setup(ee){const{drivers:R}=p(h()),{trucks:U}=p(M()),{stations:D}=p(T()),{user:g,checkAuth:A}=N(),{fetchDrivers:P}=h(),{fetchTrucks:w}=M(),{fetchStations:B}=T();P(),w(),B({type:"station"}),A();const{success:i,loading:F,error:o}=p(S()),{createMaterialMovementCheckers:I}=S(),m=u(""),n=u(""),d=u(""),b=u(g.checker.id),c=u(""),v=u(""),V=()=>{m.value="",n.value="",d.value="",b.value=g.checker.id,c.value="",v.value=""},K=()=>{I({driver_id:m.value,truck_id:n.value,station_id:d.value,checker_id:b.value,observation_ratio:c.value,remarks:v.value}),V()};return O(()=>{document.title="Tambah Material Movement"}),q(()=>{V(),o.value=null}),(te,r)=>(x(),E(z,null,[t(i)?(x(),H(Q,{key:0,modelValue:t(i),"onUpdate:modelValue":r[1]||(r[1]=e=>Y(i)?i.value=e:null),"max-width":"400"},{default:l(()=>[a(y,null,{default:l(()=>[a(G,null,{default:l(()=>[f(J(t(i)),1)]),_:1}),a(L,null,{default:l(()=>[a(_,{color:"primary",text:"",onClick:r[0]||(r[0]=()=>i.value=null)},{default:l(()=>[f(" Tutup ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):Z("",!0),a(C,null,{default:l(()=>[a(s,{cols:"12"},{default:l(()=>[a(y,null,{default:l(()=>[a(W,{onSubmit:j(K,["prevent"])},{default:l(()=>[a(C,null,{default:l(()=>[a(s,{cols:"12",md:"6"},{default:l(()=>[a(k,{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=e=>m.value=e),items:t(R),label:"Driver",placeholder:"Pilih Driver","error-messages":t(o)&&t(o).driver_id?[t(o).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:l(()=>[a(k,{modelValue:n.value,"onUpdate:modelValue":r[3]||(r[3]=e=>n.value=e),items:t(U),label:"Truck",placeholder:"Pilih Truck","error-messages":t(o)&&t(o).truck_id?[t(o).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:l(()=>[a(k,{modelValue:d.value,"onUpdate:modelValue":r[4]||(r[4]=e=>d.value=e),items:t(D),label:"POS",placeholder:"Pilih POS","error-messages":t(o)&&t(o).station_id?[t(o).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:l(()=>[a(X,{modelValue:c.value,"onUpdate:modelValue":r[5]||(r[5]=e=>c.value=e),label:"Rasio Index",placeholder:"Masukan Rasio Index","error-messages":t(o)&&t(o).observation_ratio?[t(o).observation_ratio]:[],type:"number",suffix:"mÂ³"},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"12"},{default:l(()=>[a($,{modelValue:v.value,"onUpdate:modelValue":r[6]||(r[6]=e=>v.value=e),label:"Keterangan",placeholder:"Keterangan","error-messages":t(o)&&t(o).remarks?[t(o).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[a(_,{type:"submit",loading:t(F),color:"primary"},{default:l(()=>[f(" Simpan ")]),_:1},8,["loading"]),a(_,{color:"secondary",variant:"tonal",onClick:V},{default:l(()=>[f(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{Se as default};
