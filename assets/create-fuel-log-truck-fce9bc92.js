import{R as f,H as G,r as s,S as H,_ as I,l as b,J,x as l,n as Y,q as o,c as t,I as V,v as Z,Y as g,A as j,O as z,Z as Q,K as W}from"./index-b8bb9b87.js";import{u as U}from"./fuelLog-f3558dde.js";import{u as C}from"./driver-ab7ed4fc.js";import{u as B}from"./truck-a3e50338.js";import{u as O}from"./station-a95b2555.js";import{b as A,d as X,e as $,V as u,a as D}from"./VRow-d63588e1.js";import{V as ee}from"./VDialog-7855c666.js";import{V as le}from"./VForm-b1764071.js";import{V as k}from"./VAutocomplete-33816023.js";import{V as F}from"./VTextField-d716ff87.js";import{V as te}from"./VTextarea-0d842cdd.js";import"./VGrid-89f96509.js";import"./VOverlay-b398b44b.js";import"./forwardRefs-e658ad70.js";import"./VSelect-e149f7f0.js";import"./VMenu-e6957ca7.js";import"./index-e196a5dc.js";import"./VDivider-a85c5ebc.js";import"./VSelectionControl-7fa3b263.js";import"./VChip-6ed5d59d.js";const Ue={__name:"create-fuel-log-truck",setup(ae){const{drivers:R}=f(C()),{trucks:h}=f(B()),{stations:M}=f(O()),{user:T,checkAuth:P}=G(),{fetchDrivers:w}=C(),{fetchTrucks:K}=B(),{fetchStations:L}=O();w(),K(),L({type:"gas_station"}),P();const{success:m,loading:N,error:a}=f(U()),{createFuelLogTruckGasOperator:q}=U(),S=s("AUTO"),d=s(""),i=s(""),n=s(""),x=s(T.gas_operator.id),y=s("diesel"),v=s(""),p=s(""),c=s(""),_=()=>{S.value="AUTO",d.value="",i.value="",n.value="",x.value=T.gas_operator.id,y.value="diesel",v.value="",p.value="",c.value=""},E=()=>{q({code:S.value,truck_id:d.value,driver_id:i.value,station_id:n.value,gas_operator_id:x.value,fuel_type:y.value,volume:v.value,odometer:p.value,remarks:c.value}),_()};return H(()=>{document.title="Catat BBM Truk"}),I(()=>{_(),a.value=null}),(oe,r)=>(b(),J(W,null,[l(m)?(b(),Y(ee,{key:0,modelValue:l(m),"onUpdate:modelValue":r[1]||(r[1]=e=>j(m)?m.value=e:null),"max-width":"400"},{default:o(()=>[t(A,null,{default:o(()=>[t(X,null,{default:o(()=>[V(Z(l(m)),1)]),_:1}),t($,null,{default:o(()=>[t(g,{color:"primary",text:"",onClick:r[0]||(r[0]=()=>m.value=null)},{default:o(()=>[V(" Tutup ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):z("",!0),t(D,null,{default:o(()=>[t(u,{cols:"12"},{default:o(()=>[t(A,null,{default:o(()=>[t(le,{onSubmit:Q(E,["prevent"])},{default:o(()=>[t(D,null,{default:o(()=>[t(u,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:i.value,"onUpdate:modelValue":r[2]||(r[2]=e=>i.value=e),items:l(R),label:"Driver",placeholder:"Pilih Driver","error-messages":l(a)&&l(a).driver_id?[l(a).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(k,{modelValue:d.value,"onUpdate:modelValue":r[3]||(r[3]=e=>d.value=e),items:l(h),label:"Truck",placeholder:"Pilih Truck","error-messages":l(a)&&l(a).truck_id?[l(a).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),t(u,{cols:"12",md:"12"},{default:o(()=>[t(k,{modelValue:n.value,"onUpdate:modelValue":r[4]||(r[4]=e=>n.value=e),items:l(M),label:"POS",placeholder:"Pilih POS","error-messages":l(a)&&l(a).station_id?[l(a).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(F,{modelValue:v.value,"onUpdate:modelValue":r[5]||(r[5]=e=>v.value=e),label:"Volume",placeholder:"Volume BBM","error-messages":l(a)&&l(a).volume?[l(a).volume]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(F,{modelValue:p.value,"onUpdate:modelValue":r[6]||(r[6]=e=>p.value=e),label:"Odometer",placeholder:"Odometer","error-messages":l(a)&&l(a).odometer?[l(a).odometer]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(u,{cols:"12",md:"12"},{default:o(()=>[t(te,{modelValue:c.value,"onUpdate:modelValue":r[7]||(r[7]=e=>c.value=e),label:"Keterangan",placeholder:"Keterangan Material","error-messages":l(a)&&l(a).remarks?[l(a).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(u,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[t(g,{type:"submit",loading:l(N),color:"primary"},{default:o(()=>[V(" Simpan ")]),_:1},8,["loading"]),t(g,{color:"secondary",variant:"tonal",onClick:_},{default:o(()=>[V(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{Ue as default};
