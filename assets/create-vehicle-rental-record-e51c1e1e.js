import{p as q,a2 as Q,m as X,a6 as G,a7 as J,a8 as W,b7 as Y,b8 as Z,a9 as ee,a as ae,ab as le,ac as te,g as oe,b as se,e as I,af as ne,ah as re,ai as ie,aj as ue,ak as de,ba as me,bb as ce,al as ve,ap as fe,C as pe,be as ye,c as t,ao as _e,V as Ve,a3 as K,S as D,f as ge,P as $,r as u,Q as be,X as ke,l as z,n as L,q as r,x as e,I as C,v as Pe,O as he,T as Ce,A as c,s as Se}from"./index-d8570b98.js";import{u as M}from"./vehicleRentalRecord-ebc9f440.js";import{u as H}from"./truck-17634e1b.js";import{u as N}from"./heavyVehicle-a6827fb6.js";import{c as xe}from"./VGrid-aa4a8c47.js";import{V as i,b as Te,a as j}from"./VRow-ae8b4a94.js";import{V as Be}from"./VForm-c95c40f9.js";import{V as S}from"./VTextField-d53f6a8a.js";import{V as E}from"./VAutocomplete-90f07087.js";import{c as De}from"./VSelect-e5c25370.js";import{V as we}from"./VFileInput-edc753a7.js";import"./forwardRefs-49923578.js";import"./VMenu-f39875ea.js";import"./VOverlay-f87aa014.js";import"./VSelectionControl-d26b90d8.js";const Re=xe("v-alert-title"),Ae=["success","info","warning","error"],Ue=q({border:{type:[Boolean,String],validator:a=>typeof a=="boolean"||["top","end","bottom","start"].includes(a)},borderColor:String,closable:Boolean,closeIcon:{type:Q,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:a=>Ae.includes(a)},...X(),...G(),...J(),...W(),...Y(),...Z(),...ee(),...ae(),...le(),...te({variant:"flat"})},"VAlert"),Ie=oe()({name:"VAlert",props:Ue(),emits:{"click:close":a=>!0,"update:modelValue":a=>!0},setup(a,w){let{emit:l,slots:n}=w;const x=se(a,"modelValue"),g=I(()=>{if(a.icon!==!1)return a.type?a.icon??`$${a.type}`:a.icon}),R=I(()=>({color:a.color??a.type,variant:a.variant})),{themeClasses:A}=ne(a),{colorClasses:v,colorStyles:f,variantClasses:p}=re(R),{densityClasses:y}=ie(a),{dimensionStyles:d}=ue(a),{elevationClasses:m}=de(a),{locationStyles:_}=me(a),{positionClasses:V}=ce(a),{roundedClasses:P}=ve(a),{textColorClasses:b,textColorStyles:T}=fe(pe(a,"borderColor")),{t:U}=ye(),B=I(()=>({"aria-label":U(a.closeLabel),onClick(k){x.value=!1,l("click:close",k)}}));return()=>{const k=!!(n.prepend||g.value),s=!!(n.title||a.title),o=!!(n.close||a.closable);return x.value&&t(a.tag,{class:["v-alert",a.border&&{"v-alert--border":!!a.border,[`v-alert--border-${a.border===!0?"start":a.border}`]:!0},{"v-alert--prominent":a.prominent},A.value,v.value,y.value,m.value,V.value,P.value,p.value,a.class],style:[f.value,d.value,_.value,a.style],role:"alert"},{default:()=>{var F,O;return[_e(!1,"v-alert"),a.border&&t("div",{key:"border",class:["v-alert__border",b.value],style:T.value},null),k&&t("div",{key:"prepend",class:"v-alert__prepend"},[n.prepend?t(K,{key:"prepend-defaults",disabled:!g.value,defaults:{VIcon:{density:a.density,icon:g.value,size:a.prominent?44:28}}},n.prepend):t(Ve,{key:"prepend-icon",density:a.density,icon:g.value,size:a.prominent?44:28},null)]),t("div",{class:"v-alert__content"},[s&&t(Re,{key:"title"},{default:()=>{var h;return[((h=n.title)==null?void 0:h.call(n))??a.title]}}),((F=n.text)==null?void 0:F.call(n))??a.text,(O=n.default)==null?void 0:O.call(n)]),n.append&&t("div",{key:"append",class:"v-alert__append"},[n.append()]),o&&t("div",{key:"close",class:"v-alert__close"},[n.close?t(K,{key:"close-defaults",defaults:{VBtn:{icon:a.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var h;return[(h=n.close)==null?void 0:h.call(n,{props:B.value})]}}):t(D,ge({key:"close-btn",icon:a.closeIcon,size:"x-small",variant:"text"},B.value),null)])]}})}}});const $e=Se("h2",{class:"mb-0"}," Tambah Penyewaan Kendaraan ",-1),We={__name:"create-vehicle-rental-record",setup(a){const{loading:w,error:l}=$(M()),{createVehicleRentalRecord:n}=M(),{trucks:x}=$(H()),{fetchTrucks:g}=H(),{heavyVehicles:R}=$(N()),{fetchHeavyVehicles:A}=N();g(),A();const v=u("AUTO"),f=u(),p=u(),y=u(new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,16)),d=u("0"),m=u(""),_=u(0),V=u(""),P=u(null),b=u(""),T=()=>{v.value="AUTO",f.value=null,p.value=null,y.value=null,d.value=0,m.value=0,_.value=0,V.value="",P.value=null},U=()=>{n({code:v.value,truck_id:f.value,heavy_vehicle_id:p.value,start_date:y.value,rental_duration:d.value.replace(/\D/g,""),rental_cost:m.value.replace(/\D/g,""),is_paid:_.value,remarks:V.value,payment_proof_image:P.value})};be(()=>{document.title="Tambah Data Penyewaan Kendaraan"}),ke(()=>{T(),l.value=null});const B=k=>{const s=k.target.files[0];s&&(P.value=s,b.value=s.name)};return(k,s)=>(z(),L(j,null,{default:r(()=>[e(l)&&!e(l).code&&!e(l).truck_id&&!e(l).heavy_vehicle_id&&!e(l).start_date&&!e(l).rental_duration&&!e(l).rental_cost&&!e(l).is_paid&&!e(l).remarks&&!e(l).payment_proof_image?(z(),L(Ie,{key:0,type:"warning",closable:"","close-icon":"mdi-close","close-label":"Tutup",elevation:"2"},{default:r(()=>[C(Pe(e(l)),1)]),_:1})):he("",!0),t(i,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:r(()=>[$e,t(D,{to:"/admin/vehicle-rental-record",color:"primary"},{default:r(()=>[C(" Kembali ")]),_:1})]),_:1}),t(i,{cols:"12"},{default:r(()=>[t(Te,null,{default:r(()=>[t(Be,{onSubmit:Ce(U,["prevent"])},{default:r(()=>[t(j,null,{default:r(()=>[t(i,{cols:"12",md:"6"},{default:r(()=>[t(S,{modelValue:e(v),"onUpdate:modelValue":s[0]||(s[0]=o=>c(v)?v.value=o:null),label:"Kode",placeholder:"Kode Penyewaan Kendaraan","error-messages":e(l)&&e(l).code?[e(l).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:r(()=>[t(E,{modelValue:e(f),"onUpdate:modelValue":s[1]||(s[1]=o=>c(f)?f.value=o:null),clearable:"",items:e(x),"item-title":o=>o.brand+" "+o.model,"item-value":o=>o.id,label:"Truk",placeholder:"Pilih Truk","error-messages":e(l)&&e(l).truck_id?[e(l).truck_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:r(()=>[t(E,{modelValue:e(p),"onUpdate:modelValue":s[2]||(s[2]=o=>c(p)?p.value=o:null),clearable:"",items:e(R),"item-title":o=>o.brand+" "+o.model,"item-value":o=>o.id,label:"Alat Berat",placeholder:"Pilih Alat Berat","error-messages":e(l)&&e(l).heavy_vehicle_id?[e(l).heavy_vehicle_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:r(()=>[t(S,{modelValue:e(y),"onUpdate:modelValue":s[3]||(s[3]=o=>c(y)?y.value=o:null),label:"Tanggal Mulai",placeholder:"Tanggal Mulai",type:"datetime-local","error-messages":e(l)&&e(l).start_date?[e(l).start_date]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:r(()=>[t(S,{modelValue:e(d),"onUpdate:modelValue":s[4]||(s[4]=o=>c(d)?d.value=o:null),label:"Durasi Penyewaan (Hari)",placeholder:"Durasi Penyewaan (Hari)","error-messages":e(l)&&e(l).rental_duration?[e(l).rental_duration]:[],onInput:s[5]||(s[5]=o=>d.value=e(d).replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:r(()=>[t(S,{modelValue:e(m),"onUpdate:modelValue":s[6]||(s[6]=o=>c(m)?m.value=o:null),label:"Biaya Penyewaan",placeholder:"Biaya Penyewaan","error-messages":e(l)&&e(l).rental_cost?[e(l).rental_cost]:[],onInput:s[7]||(s[7]=o=>m.value=e(m).replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))},{"prepend-inner":r(()=>[C(" Rp ")]),_:1},8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:r(()=>[t(De,{modelValue:e(_),"onUpdate:modelValue":s[8]||(s[8]=o=>c(_)?_.value=o:null),label:"Status Pembayaran",items:[{text:"Belum Dibayar",value:0},{text:"Sudah Dibayar",value:1}],"item-title":o=>o.text,"item-value":o=>o.value,"error-messages":e(l)&&e(l).is_paid?[e(l).is_paid]:[]},null,8,["modelValue","item-title","item-value","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:r(()=>[t(S,{modelValue:e(V),"onUpdate:modelValue":s[9]||(s[9]=o=>c(V)?V.value=o:null),label:"Catatan",placeholder:"Catatan","error-messages":e(l)&&e(l).remarks?[e(l).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"12"},{default:r(()=>[t(we,{modelValue:e(b),"onUpdate:modelValue":s[10]||(s[10]=o=>c(b)?b.value=o:null),label:"Bukti Pembayaran",placeholder:"Pilih Berkas","error-messages":e(l)&&e(l).payment_proof_image?[e(l).payment_proof_image]:[],onChange:B},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[t(D,{type:"submit",loading:e(w),color:"primary"},{default:r(()=>[C(" Simpan ")]),_:1},8,["loading"]),t(D,{color:"secondary",variant:"tonal",onClick:T},{default:r(()=>[C(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{We as default};
